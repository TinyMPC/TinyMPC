========================================
üöÄ OBSTACLE AVOIDANCE WITH SDP STATE LIFTING
========================================
Problem setup:
- Physical states: 4 (px, py, vx, vy)
- Physical inputs: 2 (ax, ay)
- Augmented states: 20 (x + vec(xx^T))
- Augmented inputs: 22 (u + cross terms)
- Horizon: 31
- Obstacle: [-5, 0], r=2

üîß Setting up TinyMPC solver...
üîß PURE JULIA: No box constraints (Julia doesn't have bounds)
üîß Using PURE Julia formulation - only collision constraint...
‚úÖ Added ONLY collision constraint per timestep (pure Julia):
  - 1 collision avoidance constraint (m*x >= n)
üîß Pure SDP projection: [1;x;u;X;XU;UX;UU] ‚™∞ 0
‚úÖ TinyMPC solver initialized successfully!
‚úÖ Augmented dynamics matrices built with Kronecker products
‚úÖ Linear collision avoidance constraint added

üîç Sanity checking collision constraint...
  At obstacle center [-5, 0]: phi = -25, n = -21 ‚Üí ‚ùå VIOLATED
  Far from obstacle [-10, 0]: phi = 0, n = -21 ‚Üí ‚úÖ SATISFIED

üéØ Initial physical state: [[-10, 0.1,   0,   0]]
üéØ Goal physical state: [[0, 0, 0, 0]]

üîç Julia linear costs being used:
  q_aug = [  0   0   0   0 0.1   0   0   0   0 0.1   0   0   0   0 0.1   0   0   0   0 0.1]
  r_aug = [ 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 10  0  0 10]
  Xref_one = [    -0     -0     -0     -0 -50000     -0     -0     -0     -0 -50000     -0     -0     -0     -0 -50000     -0     -0     -0     -0 -50000]
  Uref_one = [   -0    -0    -0    -0    -0    -0    -0    -0    -0    -0    -0    -0    -0    -0    -0    -0    -0    -0 -0.01    -0    -0 -0.01]

üöÄ Solving with augmented state SDP formulation...
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
[SDP] Augmented state projection called!
[SDP] State-control projection called!
‚è±Ô∏è  Solve time: 2418 ms
üîÑ Iterations: 200
‚ö†Ô∏è  Solver status: 1

üîç Initial condition check:
  Primal x[0]:    [[-10, 0.1,   0,   0]]
  Solution x[0]:  [[-10, 0.1,   0,   0]]
  Expected x[0]:  [[-10, 0.1,   0,   0]]

========================================
üìä TRAJECTORY ANALYSIS
========================================
üõ°Ô∏è  Safety violations: 0/31 time steps
üìè Minimum distance to obstacle: 2.58418
‚úÖ Safe trajectory: YES

üîç Checking moment matrix consistency...
üîó Moment matrix consistency violations: 30/31

üìê Checking constraint feasibility on solution...
  t=0: pos=[-10, 0.1]
    Solver constraint: 0.01 vs -21 ‚Üí violation=0
    Manual constraint: 0.01 vs -21 ‚Üí violation=0
  t=1: pos=[18.2886, -0.378727]
    Solver constraint: 33330.3 vs -21 ‚Üí violation=0
    Manual constraint: 517.504 vs -21 ‚Üí violation=0
  t=2: pos=[15.12, 5.98923]
    Solver constraint: 50138.8 vs -21 ‚Üí violation=0
    Manual constraint: 415.687 vs -21 ‚Üí violation=0
üìä Maximum constraint violation: 0 ‚Üí ‚úÖ FEASIBLE
üìä Matrix dimensions for CSV:
  X_solution: 20x31
  U_solution: 22x30
  NHORIZON: 31
Physical trajectory saved to obstacle_avoidance_sdp_lifted_trajectory.csv

SDP state lifting obstacle avoidance complete!
Augmented state formulation successfully implemented!
